<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>heat.model &#8212; heat 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for heat.model</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">configparser</span>
<span class="kn">import</span> <span class="nn">ast</span>
<span class="kn">import</span> <span class="nn">numbers</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">unipath</span> <span class="k">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">.utils</span> <span class="k">import</span> <span class="n">BASE_DIR</span><span class="p">,</span> <span class="n">DATA_DIR</span><span class="p">,</span> <span class="n">DEFAULT_SETTINGS</span>
<span class="kn">from</span> <span class="nn">.geometry</span> <span class="k">import</span> <span class="n">Geometry</span>
<span class="kn">from</span> <span class="nn">.mesh</span> <span class="k">import</span> <span class="n">Mesh</span>
<span class="kn">from</span> <span class="nn">.material</span> <span class="k">import</span> <span class="n">Material</span>
<span class="kn">from</span> <span class="nn">.initial</span> <span class="k">import</span> <span class="n">Initial</span>
<span class="kn">from</span> <span class="nn">.source</span> <span class="k">import</span> <span class="n">Source</span>
<span class="kn">from</span> <span class="nn">.boundary</span> <span class="k">import</span> <span class="n">Boundary</span>
<span class="kn">from</span> <span class="nn">.solution</span> <span class="k">import</span> <span class="n">Solution</span>


<div class="viewcode-block" id="Model"><a class="viewcode-back" href="../../heat.html#heat.model.Model">[docs]</a><span class="k">class</span> <span class="nc">Model</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39; The model class</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">DATA_DIR</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s2">&quot;lastSolution.vtu&quot;</span><span class="p">)):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkOutputFilePath</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">output</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span> <span class="o">=</span> <span class="n">Geometry</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="n">Material</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initial</span> <span class="o">=</span> <span class="n">Initial</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">Source</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">boundary</span> <span class="o">=</span> <span class="n">Boundary</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solution</span> <span class="o">=</span> <span class="n">Solution</span><span class="p">()</span>
        <span class="c1"># The model class is always initialized reading the configuration file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">readConfig</span><span class="p">()</span>

<div class="viewcode-block" id="Model.checkOutputFilePath"><a class="viewcode-back" href="../../heat.html#heat.model.Model.checkOutputFilePath">[docs]</a>    <span class="k">def</span> <span class="nf">checkOutputFilePath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Check if the output path is valid and add the vtu extension if missing.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filepath</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">==</span> <span class="s1">&#39;.vtu&#39;</span><span class="p">:</span>
                <span class="c1"># If no .vtu extension add it at the end</span>
                <span class="n">filepath</span> <span class="o">=</span><span class="n">filepath</span><span class="o">+</span><span class="s1">&#39;.vtu&#39;</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">filepath</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="s1">&#39;The output path is not valid.&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.getSettings"><a class="viewcode-back" href="../../heat.html#heat.model.Model.getSettings">[docs]</a>    <span class="k">def</span> <span class="nf">getSettings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Generate the settings dictionary for file I/O</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">getSettings</span><span class="p">()</span>
        <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;mesh&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">getSettings</span><span class="p">()</span>
        <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;material&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">getSettings</span><span class="p">()</span>
        <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;initial&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial</span><span class="o">.</span><span class="n">getSettings</span><span class="p">()</span>
        <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">getSettings</span><span class="p">()</span>
        <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;boundary&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">getSettings</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">settings</span></div>

<div class="viewcode-block" id="Model.updateModel"><a class="viewcode-back" href="../../heat.html#heat.model.Model.updateModel">[docs]</a>    <span class="k">def</span> <span class="nf">updateModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Updtate the model attributes.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Model.saveSettings"><a class="viewcode-back" href="../../heat.html#heat.model.Model.saveSettings">[docs]</a>    <span class="k">def</span> <span class="nf">saveSettings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Write the current settings to the configuration file.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSettings</span><span class="p">()</span>
        <span class="n">Model</span><span class="o">.</span><span class="n">writeConfig</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>
    
    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Model.writeDefaultConfig"><a class="viewcode-back" href="../../heat.html#heat.model.Model.writeDefaultConfig">[docs]</a>    <span class="k">def</span> <span class="nf">writeDefaultConfig</span><span class="p">():</span>
        <span class="sd">&#39;&#39;&#39;Write default configuration file.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="n">DEFAULT_SETTINGS</span>
        <span class="n">Model</span><span class="o">.</span><span class="n">writeConfig</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Model.writeConfig"><a class="viewcode-back" href="../../heat.html#heat.model.Model.writeConfig">[docs]</a>    <span class="k">def</span> <span class="nf">writeConfig</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">DATA_DIR</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s2">&quot;lastSolution.vtu&quot;</span><span class="p">)):</span>
        <span class="sd">&#39;&#39;&#39;Write or overwrite config.ini using the provided settings.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;mesh&#39;</span><span class="p">]</span>
        <span class="n">ma</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;material&#39;</span><span class="p">]</span>
        <span class="n">ini</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;initial&#39;</span><span class="p">]</span>
        <span class="n">src</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span>
        <span class="n">bnd</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;boundary&#39;</span><span class="p">]</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s2">&quot;config.ini&quot;</span><span class="p">),</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cfgfile</span><span class="p">:</span>
            <span class="n">Config</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">(</span><span class="n">allow_no_value</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s1">&#39;File&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;File&#39;</span><span class="p">,</span> <span class="s1">&#39;# Path to the solution file.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;File&#39;</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s1">&#39;Geometry&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Geometry&#39;</span><span class="p">,</span> <span class="s1">&#39;# Set the geometry centered at the origin. The dimension d = 1, 2 or 3&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Geometry&#39;</span><span class="p">,</span> <span class="s1">&#39;# l is a vector giving the length of the geometry in meters for each&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Geometry&#39;</span><span class="p">,</span> <span class="s1">&#39;# dimensions. For now different side lengths are not suported, i.e.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Geometry&#39;</span><span class="p">,</span> <span class="s1">&#39;# the geometry can only be  a line, a square or a cube of length&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Geometry&#39;</span><span class="p">,</span> <span class="s1">&#39;# l[0]. l[1] and l[2] are set to l[0] in the code.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Geometry&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Geometry&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;[</span><span class="si">{0}</span><span class="s1">, </span><span class="si">{1}</span><span class="s1">, </span><span class="si">{2}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">g</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">g</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s1">&#39;Mesh&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Mesh&#39;</span><span class="p">,</span> <span class="s1">&#39;# Set the mesh size: &quot;coarse&quot;, &quot;fine&quot; or &quot;normal&quot;.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Mesh&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s1">&#39;Material&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Material&#39;</span><span class="p">,</span> <span class="s1">&#39;# Set the material properties.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Material&#39;</span><span class="p">,</span> <span class="s1">&#39;# name, e.g. Copper&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Material&#39;</span><span class="p">,</span> <span class="s1">&#39;# density &quot;rho&quot; in kg/m^3.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Material&#39;</span><span class="p">,</span> <span class="s1">&#39;# thermal conductivity &quot;k&quot; in W/m/K.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Material&#39;</span><span class="p">,</span> <span class="s1">&#39;# heat capacity &quot;Cp&quot; in J/kg/K.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Material&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">ma</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Material&#39;</span><span class="p">,</span> <span class="s1">&#39;rho&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ma</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Material&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ma</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Material&#39;</span><span class="p">,</span> <span class="s1">&#39;Cp&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ma</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s1">&#39;Initial&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Initial&#39;</span><span class="p">,</span> <span class="s1">&#39;# Set the initial temperature distribution.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Initial&#39;</span><span class="p">,</span> <span class="s1">&#39;# uniform T(x,y,z) = a.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Initial&#39;</span><span class="p">,</span> <span class="s1">&#39;# linear T(x_i) = a*(x_i/l - b), a&gt; = 0, 0 &lt;= b &gt;=1 .&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Initial&#39;</span><span class="p">,</span> <span class="s1">&#39;# exponential T(x_i) = a*exp(-(x_i/l - b)/c), c &gt; 0.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Initial&#39;</span><span class="p">,</span> <span class="s1">&#39;# gaussian T(x_i) = a*exp(-(x_i/l - b)^2/(2*c^2)).&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Initial&#39;</span><span class="p">,</span> <span class="s1">&#39;# The values of b, and c are ignored if not used in the distribution.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Initial&#39;</span><span class="p">,</span> <span class="s1">&#39;dist&#39;</span><span class="p">,</span> <span class="n">ini</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Initial&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ini</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Initial&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ini</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Initial&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ini</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;# Set a localized time dependent heat source in the geometry.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;# location is a vector specifying the center of the source in.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;# units of length &quot;l&quot;. Each compoonent must have an absolute value&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;# smaller or equal than &quot;1/2&quot;, e.g. [-1/2, 0, 1/2].&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;# fwhm is the full width at half maximum of the source in units of &quot;l&quot;.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;# fct is the time dependent function describing the source in W/m^d.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;# uniform Q(t) = a.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;# linear Q(t) = a*t + b.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;# exponential Q(t) = a*exp(-t/b), b &gt; 0.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;# The values of b is ignored if not used in the function.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">, </span><span class="si">{2}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">src</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">src</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">src</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;fwhm&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">src</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;fct&#39;</span><span class="p">,</span> <span class="n">src</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">src</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">src</span><span class="p">[</span><span class="mi">6</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# Set the boundary conditions for the model.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# The boundary conditions comes in pairs. If d = 1&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# their is only one pair, if d = 2 two pairs, and if d = 3&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# three pairs. There are 5 type of boundary conditions:&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# dirichlet, neumann, robin, mixedI, mixedII.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# the variable g1 and g2 can vary in time and the following&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# functios can be used to describe them:&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# uniform g_i = a.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# linear g_i = a*t + b.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# exponential g_i = a*exp(-t/b), b &gt; 0.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# The values of b is ignored if not used in the function.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# The parameters k1, and k2 are used for the robin boundary condition.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;# The values of k1, and k2 are ignored if not used.&#39;</span><span class="p">)</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">, </span><span class="si">{2}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bnd</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;g1&#39;</span><span class="p">,</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">, </span><span class="si">{2}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bnd</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;a1&#39;</span><span class="p">,</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">, </span><span class="si">{2}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bnd</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">8</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;b1&#39;</span><span class="p">,</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">, </span><span class="si">{2}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bnd</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">11</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;k1&#39;</span><span class="p">,</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">, </span><span class="si">{2}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bnd</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">14</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;g2&#39;</span><span class="p">,</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">, </span><span class="si">{2}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bnd</span><span class="p">[</span><span class="mi">15</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">16</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">17</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;a2&#39;</span><span class="p">,</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">, </span><span class="si">{2}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bnd</span><span class="p">[</span><span class="mi">18</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">19</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">20</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;b2&#39;</span><span class="p">,</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">, </span><span class="si">{2}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bnd</span><span class="p">[</span><span class="mi">21</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">22</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">23</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;Boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;k2&#39;</span><span class="p">,</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">, </span><span class="si">{2}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bnd</span><span class="p">[</span><span class="mi">24</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">25</span><span class="p">],</span> <span class="n">bnd</span><span class="p">[</span><span class="mi">26</span><span class="p">]))</span>
            <span class="n">Config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cfgfile</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.compute"><a class="viewcode-back" href="../../heat.html#heat.model.Model.compute">[docs]</a>    <span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Compute: compute the solution.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">tArray</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTimeList</span><span class="p">()</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">getAlpha</span><span class="p">()</span>
        <span class="n">Coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">getCoords</span><span class="p">()</span>
        <span class="n">bc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">bcType</span>
        <span class="c1"># Temporary for testing:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Computing:&#39;</span><span class="p">)</span>
        <span class="n">initTerm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">Coords</span><span class="p">,</span> <span class="n">tArray</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>
        <span class="n">bndTerm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">tArray</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        srcTerm = self.source.compute(bc[0], Coords[dim[0]], tArray, alpha)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="n">initTerm</span> <span class="o">+</span> <span class="n">bndTerm</span>  <span class="c1"># + srcTerm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">sol</span> <span class="o">=</span> <span class="n">sol</span>  <span class="c1"># np.random.rand(self.mesh.getNumNodes())</span></div>

<div class="viewcode-block" id="Model.getTimeList"><a class="viewcode-back" href="../../heat.html#heat.model.Model.getTimeList">[docs]</a>    <span class="k">def</span> <span class="nf">getTimeList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coeff</span><span class="o">=</span><span class="mf">16040.0</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">101</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Return the simulation time list</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">pass</span>
        <span class="n">lmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">getMaxLength</span><span class="p">()</span>
        <span class="n">k</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">k</span>
        <span class="n">tmax</span> <span class="o">=</span> <span class="n">coeff</span><span class="o">*</span><span class="n">lmax</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">k</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tmax</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span></div>

<div class="viewcode-block" id="Model.readConfig"><a class="viewcode-back" href="../../heat.html#heat.model.Model.readConfig">[docs]</a>    <span class="k">def</span> <span class="nf">readConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize the model attributes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Config</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">(</span><span class="n">allow_no_value</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">Config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s2">&quot;config.ini&quot;</span><span class="p">))</span>
        <span class="n">sections</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">sections</span><span class="p">()</span>
        <span class="n">opt</span> <span class="o">=</span> <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">sections</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">section</span><span class="o">==</span><span class="s1">&#39;Geometry&#39;</span><span class="p">:</span>
                <span class="n">options</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">validateGeometry</span><span class="p">(</span><span class="n">Config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
                <span class="n">opt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">section</span><span class="o">==</span><span class="s1">&#39;Mesh&#39;</span><span class="p">:</span>
                <span class="n">options</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">validateMesh</span><span class="p">(</span><span class="n">Config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
                <span class="n">opt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">section</span><span class="o">==</span><span class="s1">&#39;Material&#39;</span><span class="p">:</span>
                <span class="n">options</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">validateMaterial</span><span class="p">(</span><span class="n">Config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
                <span class="n">opt</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">section</span><span class="o">==</span><span class="s1">&#39;Initial&#39;</span><span class="p">:</span>
                <span class="n">options</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">validateInitial</span><span class="p">(</span><span class="n">Config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
                <span class="n">opt</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">section</span><span class="o">==</span><span class="s1">&#39;Source&#39;</span><span class="p">:</span>
                <span class="n">options</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">validateSource</span><span class="p">(</span><span class="n">Config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
                <span class="n">opt</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">section</span><span class="o">==</span><span class="s1">&#39;Boundary&#39;</span><span class="p">:</span>
                <span class="n">options</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">validateBoundary</span><span class="p">(</span><span class="n">Config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
                <span class="n">opt</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">section</span><span class="o">==</span><span class="s1">&#39;File&#39;</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file: [</span><span class="si">{0}</span><span class="s1">] is not valid section.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">))</span>
        <span class="k">if</span> <span class="kc">False</span> <span class="ow">in</span> <span class="n">opt</span><span class="p">:</span>
            <span class="n">ind</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">invert</span><span class="p">(</span><span class="n">opt</span><span class="p">))</span>
            <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Geometry&#39;</span><span class="p">,</span> <span class="s1">&#39;Mesh&#39;</span><span class="p">,</span> <span class="s1">&#39;Material&#39;</span><span class="p">,</span> <span class="s1">&#39;Initial&#39;</span><span class="p">,</span> <span class="s1">&#39;Source&#39;</span><span class="p">,</span> <span class="s1">&#39;Boundary&#39;</span><span class="p">]</span>
            <span class="c1"># Display the first missing section</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The configuration file is not valid the section [</span><span class="si">{0}</span><span class="s1">] is missing.&#39;</span>
                             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">ind</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]))</span></div>

<div class="viewcode-block" id="Model.checkLengthOption"><a class="viewcode-back" href="../../heat.html#heat.model.Model.checkLengthOption">[docs]</a>    <span class="k">def</span> <span class="nf">checkLengthOption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">optionList</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">optionList</span><span class="p">)</span><span class="o">==</span><span class="n">length</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: Invalid length vector. &#39;</span>\
                             <span class="s1">&#39;the option &quot;</span><span class="si">{1}</span><span class="s1">&quot; must be a list of </span><span class="si">{2}</span><span class="s1"> components.&#39;</span>
                             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">length</span><span class="p">))</span></div>

<div class="viewcode-block" id="Model.validateGeometry"><a class="viewcode-back" href="../../heat.html#heat.model.Model.validateGeometry">[docs]</a>    <span class="k">def</span> <span class="nf">validateGeometry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initilize the geometry attribute</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">option</span><span class="o">==</span><span class="s1">&#39;d&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;l&#39;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: &quot;</span><span class="si">{1}</span><span class="s1">&quot;&quot; is not a valid option.&#39;</span>
                                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">Config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;l&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">checkLengthOption</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Congiguration file [</span><span class="si">{0}</span><span class="s2">]: exception on </span><span class="si">{1}</span><span class="s2">.&quot;</span>
                                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># For now only lines, square and cube are supported.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span> <span class="o">=</span> <span class="n">Geometry</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>  <span class="c1">#[1]</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>  <span class="c1">#[2]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: One or more options is missing.&#39;</span>
                             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">))</span></div>


<div class="viewcode-block" id="Model.validateMesh"><a class="viewcode-back" href="../../heat.html#heat.model.Model.validateMesh">[docs]</a>    <span class="k">def</span> <span class="nf">validateMesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initilize the mesh attribute</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">option</span><span class="o">==</span><span class="s1">&#39;size&#39;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: &quot;</span><span class="si">{1}</span><span class="s1">&quot;&quot; is not a valid option.&#39;</span>
                                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Congiguration file [</span><span class="si">{0}</span><span class="s2">]: exception on </span><span class="si">{1}</span><span class="s2">.&quot;</span>
                                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: One or more options is missing.&#39;</span>
                             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">))</span></div>

<div class="viewcode-block" id="Model.validateMaterial"><a class="viewcode-back" href="../../heat.html#heat.model.Model.validateMaterial">[docs]</a>    <span class="k">def</span> <span class="nf">validateMaterial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initilize the material attribute</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">option</span><span class="o">==</span><span class="s1">&#39;name&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;rho&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;k&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;cp&#39;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: &quot;</span><span class="si">{1}</span><span class="s1">&quot;&quot; is not a valid option.&#39;</span>
                                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;name&#39;</span><span class="p">:</span>
                    <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">Config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Congiguration file [</span><span class="si">{0}</span><span class="s2">]: exception on </span><span class="si">{1}</span><span class="s2">.&quot;</span>
                                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="n">Material</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;rho&#39;</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;cp&#39;</span><span class="p">])</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: One or more options is missing.&#39;</span>
                             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">))</span></div>

<div class="viewcode-block" id="Model.validateInitial"><a class="viewcode-back" href="../../heat.html#heat.model.Model.validateInitial">[docs]</a>    <span class="k">def</span> <span class="nf">validateInitial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initilize the initial attribute</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">option</span><span class="o">==</span><span class="s1">&#39;dist&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;a&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;b&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;c&#39;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: &quot;</span><span class="si">{1}</span><span class="s1">&quot;&quot; is not a valid option.&#39;</span>
                                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;dist&#39;</span><span class="p">:</span>
                    <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">Config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Congiguration file [</span><span class="si">{0}</span><span class="s2">]: exception on </span><span class="si">{1}</span><span class="s2">.&quot;</span>
                                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initial</span> <span class="o">=</span> <span class="n">Initial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mesh</span><span class="p">,</span>
                                   <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;dist&#39;</span><span class="p">],</span>
                                   <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                                   <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">],</span>
                                   <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: One or more options is missing.&#39;</span>
                             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">))</span></div>

<div class="viewcode-block" id="Model.validateSource"><a class="viewcode-back" href="../../heat.html#heat.model.Model.validateSource">[docs]</a>    <span class="k">def</span> <span class="nf">validateSource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Initilize the source attribute</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">option</span><span class="o">==</span><span class="s1">&#39;location&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;fwhm&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;fct&#39;</span> <span class="ow">or</span>
                    <span class="n">option</span><span class="o">==</span><span class="s1">&#39;a&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;b&#39;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: &quot;</span><span class="si">{1}</span><span class="s1">&quot;&quot; is not a valid option.&#39;</span>
                                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;location&#39;</span><span class="p">:</span>
                    <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">Config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">checkLengthOption</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;fct&#39;</span><span class="p">:</span>
                    <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># fwhm, a, b</span>
                    <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">Config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Congiguration file [</span><span class="si">{0}</span><span class="s2">]: exception on </span><span class="si">{1}</span><span class="s2">.&quot;</span>
                                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">,</span>
                                 <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">],</span>
                                 <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;fwhm&#39;</span><span class="p">],</span>
                                 <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;fct&#39;</span><span class="p">],</span>
                                 <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                                 <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: One or more options is missing.&#39;</span>
                             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">))</span></div>

<div class="viewcode-block" id="Model.validateBoundary"><a class="viewcode-back" href="../../heat.html#heat.model.Model.validateBoundary">[docs]</a>    <span class="k">def</span> <span class="nf">validateBoundary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">options</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Initilize the boundary attribute</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">option</span><span class="o">==</span><span class="s1">&#39;type&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;g1&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;a1&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;b1&#39;</span> <span class="ow">or</span>
                    <span class="n">option</span><span class="o">==</span><span class="s1">&#39;g2&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;a2&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;b2&#39;</span> <span class="ow">or</span>
                    <span class="n">option</span><span class="o">==</span><span class="s1">&#39;k1&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;k2&#39;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: &quot;</span><span class="si">{1}</span><span class="s1">&quot;&quot; is not a valid option.&#39;</span>
                                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">option</span><span class="o">==</span><span class="s1">&#39;type&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;g1&#39;</span> <span class="ow">or</span> <span class="n">option</span><span class="o">==</span><span class="s1">&#39;g2&#39;</span><span class="p">):</span>
                    <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">)</span>
                    <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span><span class="o">=</span><span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;[]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">])):</span>
                        <span class="c1"># remove remaining whitespaces from beginning and end of the string</span>
                        <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">Config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">checkLengthOption</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">dic</span><span class="p">[</span><span class="n">option</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Congiguration file [</span><span class="si">{0}</span><span class="s2">]: exception on </span><span class="si">{1}</span><span class="s2">.&quot;</span>
                                 <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">option</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">boundary</span> <span class="o">=</span> <span class="n">Boundary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mesh</span><span class="p">,</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;g1&#39;</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;a1&#39;</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;b1&#39;</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;k1&#39;</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;g2&#39;</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;a2&#39;</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;b2&#39;</span><span class="p">],</span>
                                     <span class="n">dic</span><span class="p">[</span><span class="s1">&#39;k2&#39;</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Configuration file [</span><span class="si">{0}</span><span class="s1">]: One or more options is missing.&#39;</span>
                             <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">section</span><span class="p">))</span></div></div>


</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/heat.png" alt="Logo"/>
            </a></p><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Francois Roy.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
    </div>

    

    
  </body>
</html>